import{_ as e,c as s,o as i,ag as a}from"./chunks/framework.S-Qvb3wi.js";const g=JSON.parse('{"title":"IAM Policies Guide","description":"","frontmatter":{},"headers":[],"relativePath":"services/IAM-service/iam-policies.md","filePath":"services/IAM-service/iam-policies.md"}'),o={name:"services/IAM-service/iam-policies.md"};function n(l,t,r,d,c,h){return i(),s("div",null,t[0]||(t[0]=[a('<h1 id="iam-policies-guide" tabindex="-1">IAM Policies Guide <a class="header-anchor" href="#iam-policies-guide" aria-label="Permalink to &quot;IAM Policies Guide&quot;">​</a></h1><p>This document provides a comprehensive guide to the Identity and Access Management (IAM) policies in Open Archiver. Our policy structure is inspired by AWS IAM, providing a powerful and flexible way to manage permissions.</p><h2 id="_1-policy-structure" tabindex="-1">1. Policy Structure <a class="header-anchor" href="#_1-policy-structure" aria-label="Permalink to &quot;1. Policy Structure&quot;">​</a></h2><p>A policy is a JSON object that consists of one or more statements. Each statement includes an <code>Effect</code>, <code>Action</code>, and <code>Resource</code>.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Effect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Allow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive:read&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive:search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive/all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><strong><code>Effect</code></strong>: Specifies whether the statement results in an <code>Allow</code> or <code>Deny</code>. An explicit <code>Deny</code> always overrides an <code>Allow</code>.</li><li><strong><code>Action</code></strong>: A list of operations that the policy grants or denies permission to perform. Actions are formatted as <code>service:operation</code>.</li><li><strong><code>Resource</code></strong>: A list of resources to which the actions apply. Resources are specified in a hierarchical format. Wildcards (<code>*</code>) can be used.</li></ul><h2 id="_2-wildcard-support" tabindex="-1">2. Wildcard Support <a class="header-anchor" href="#_2-wildcard-support" aria-label="Permalink to &quot;2. Wildcard Support&quot;">​</a></h2><p>Our IAM system supports wildcards (<code>*</code>) in both <code>Action</code> and <code>Resource</code> fields to provide flexible permission management, as defined in the <code>PolicyValidator</code>.</p><h3 id="action-wildcards" tabindex="-1">Action Wildcards <a class="header-anchor" href="#action-wildcards" aria-label="Permalink to &quot;Action Wildcards&quot;">​</a></h3><p>You can use wildcards to grant broad permissions for actions:</p><ul><li><strong>Global Wildcard (<code>*</code>)</strong>: A standalone <code>*</code> in the <code>Action</code> field grants permission for all possible actions across all services.<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li><strong>Service-Level Wildcard (<code>service:*</code>)</strong>: A wildcard at the end of an action string grants permission for all actions within that specific service.<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive:*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><h3 id="resource-wildcards" tabindex="-1">Resource Wildcards <a class="header-anchor" href="#resource-wildcards" aria-label="Permalink to &quot;Resource Wildcards&quot;">​</a></h3><p>Wildcards can also be used to specify resources:</p><ul><li><strong>Global Wildcard (<code>*</code>)</strong>: A standalone <code>*</code> in the <code>Resource</code> field applies the policy to all resources in the system.<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li><strong>Partial Wildcards</strong>: Some services allow wildcards at specific points in the resource path to refer to all resources of a certain type. For example, to target all ingestion sources:<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ingestion-source/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><h2 id="_3-actions-and-resources-by-service" tabindex="-1">3. Actions and Resources by Service <a class="header-anchor" href="#_3-actions-and-resources-by-service" aria-label="Permalink to &quot;3. Actions and Resources by Service&quot;">​</a></h2><p>The following sections define the available actions and resources, categorized by their respective services.</p><h3 id="service-archive" tabindex="-1">Service: <code>archive</code> <a class="header-anchor" href="#service-archive" aria-label="Permalink to &quot;Service: `archive`&quot;">​</a></h3><p>The <code>archive</code> service pertains to all actions related to accessing and managing archived emails.</p><p><strong>Actions:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Action</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>archive:read</code></td><td style="text-align:left;">Grants permission to read the content and metadata of archived emails.</td></tr><tr><td style="text-align:left;"><code>archive:search</code></td><td style="text-align:left;">Grants permission to perform search queries against the email archive.</td></tr><tr><td style="text-align:left;"><code>archive:export</code></td><td style="text-align:left;">Grants permission to export search results or individual emails.</td></tr></tbody></table><p><strong>Resources:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Resource</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>archive/all</code></td><td style="text-align:left;">Represents the entire email archive.</td></tr><tr><td style="text-align:left;"><code>archive/ingestion-source/{sourceId}</code></td><td style="text-align:left;">Scopes the action to emails from a specific ingestion source.</td></tr><tr><td style="text-align:left;"><code>archive/mailbox/{email}</code></td><td style="text-align:left;">Scopes the action to a single, specific mailbox, usually identified by an email address.</td></tr><tr><td style="text-align:left;"><code>archive/custodian/{custodianId}</code></td><td style="text-align:left;">Scopes the action to emails belonging to a specific custodian.</td></tr></tbody></table><hr><h3 id="service-ingestion" tabindex="-1">Service: <code>ingestion</code> <a class="header-anchor" href="#service-ingestion" aria-label="Permalink to &quot;Service: `ingestion`&quot;">​</a></h3><p>The <code>ingestion</code> service covers the management of email ingestion sources.</p><p><strong>Actions:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Action</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ingestion:createSource</code></td><td style="text-align:left;">Grants permission to create a new ingestion source.</td></tr><tr><td style="text-align:left;"><code>ingestion:readSource</code></td><td style="text-align:left;">Grants permission to view the details of ingestion sources.</td></tr><tr><td style="text-align:left;"><code>ingestion:updateSource</code></td><td style="text-align:left;">Grants permission to modify the configuration of an ingestion source.</td></tr><tr><td style="text-align:left;"><code>ingestion:deleteSource</code></td><td style="text-align:left;">Grants permission to delete an ingestion source.</td></tr><tr><td style="text-align:left;"><code>ingestion:manageSync</code></td><td style="text-align:left;">Grants permission to trigger, pause, or force a sync on an ingestion source.</td></tr></tbody></table><p><strong>Resources:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Resource</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ingestion-source/*</code></td><td style="text-align:left;">Represents all ingestion sources.</td></tr><tr><td style="text-align:left;"><code>ingestion-source/{sourceId}</code></td><td style="text-align:left;">Scopes the action to a single, specific ingestion source.</td></tr></tbody></table><hr><h3 id="service-system" tabindex="-1">Service: <code>system</code> <a class="header-anchor" href="#service-system" aria-label="Permalink to &quot;Service: `system`&quot;">​</a></h3><p>The <code>system</code> service is for managing system-level settings, users, and roles.</p><p><strong>Actions:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Action</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>system:readSettings</code></td><td style="text-align:left;">Grants permission to view system settings.</td></tr><tr><td style="text-align:left;"><code>system:updateSettings</code></td><td style="text-align:left;">Grants permission to modify system settings.</td></tr><tr><td style="text-align:left;"><code>system:readUsers</code></td><td style="text-align:left;">Grants permission to list and view user accounts.</td></tr><tr><td style="text-align:left;"><code>system:createUser</code></td><td style="text-align:left;">Grants permission to create new user accounts.</td></tr><tr><td style="text-align:left;"><code>system:updateUser</code></td><td style="text-align:left;">Grants permission to modify existing user accounts.</td></tr><tr><td style="text-align:left;"><code>system:deleteUser</code></td><td style="text-align:left;">Grants permission to delete user accounts.</td></tr><tr><td style="text-align:left;"><code>system:assignRole</code></td><td style="text-align:left;">Grants permission to assign roles to users.</td></tr></tbody></table><p><strong>Resources:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Resource</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>system/settings</code></td><td style="text-align:left;">Represents the system configuration.</td></tr><tr><td style="text-align:left;"><code>system/users</code></td><td style="text-align:left;">Represents all user accounts within the system.</td></tr><tr><td style="text-align:left;"><code>system/user/{userId}</code></td><td style="text-align:left;">Scopes the action to a single, specific user account.</td></tr></tbody></table><hr><h3 id="service-dashboard" tabindex="-1">Service: <code>dashboard</code> <a class="header-anchor" href="#service-dashboard" aria-label="Permalink to &quot;Service: `dashboard`&quot;">​</a></h3><p>The <code>dashboard</code> service relates to viewing analytics and overview information.</p><p><strong>Actions:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Action</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>dashboard:read</code></td><td style="text-align:left;">Grants permission to view all dashboard widgets and statistics.</td></tr></tbody></table><p><strong>Resources:</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Resource</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>dashboard/*</code></td><td style="text-align:left;">Represents all components of the dashboard.</td></tr></tbody></table>',43)]))}const u=e(o,[["render",n]]);export{g as __pageData,u as default};
